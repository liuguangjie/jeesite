<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thinkgem.jeesite.modules.sql.dao.SqlDatatableDao">


	<sql id="oracle_id">
		SELECT
		t.TABLE_NAME AS name,
		c.COMMENTS AS comments
		FROM user_tables t, user_tab_comments c
		WHERE t.table_name = c.table_name
		<if test="name != null and name != ''">
			AND t.TABLE_NAME = upper(#{name})
		</if>
		ORDER BY t.TABLE_NAME
	</sql>

	<sql id="mssql_id">
		SELECT t.name AS name,b.value AS comments
		FROM sys.objects t LEFT JOIN sys.extended_properties b ON b.major_id=t.object_id and b.minor_id=0 and b.class=1 AND b.name='MS_Description'
		WHERE t.type='U'
		<if test="name != null and name != ''">
			AND t.name = (#{name})
		</if>
		ORDER BY t.name
	</sql>
	<sql id="mysql_id">
		SELECT t.table_name AS name,t.TABLE_COMMENT AS comments
		FROM information_schema.`TABLES` t
		WHERE t.TABLE_SCHEMA = (select database())
		<if test="name != null and name != ''">
			AND t.TABLE_NAME = (#{name})
		</if>
		ORDER BY t.TABLE_NAME
	</sql>

	<select id="queryAllTables" parameterType="ModelWrap" resultType="java.util.List">
		<if test="dbName == 'oracle'">
			<include refid="oracle_id"/>
		</if>
		<if test="dbName == 'mssql'">
			<include refid="mssql_id"/>
		</if>
		<if test="dbName == 'mysql'">
			<include refid="mysql_id"/>
		</if>
	</select>
	
</mapper>